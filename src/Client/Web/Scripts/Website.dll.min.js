(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;$.Define($$,{Website:{Client:{HelloWorld:function(){var z,A,B;z=c.add(d.Div(e.ofArray([d.Id("message")])),$.New(f,{$:0}));A=(B=function(C){var D,H;D=g.getJSON("HelloWorld",$.Tupled(function(E){var F,G;F=E[0];G=E[1];return C.set_Text(F.Message);}));H=function(I){I;};return H(D);},function(J){return c.OnAfterRender(B,J);});A(z);return z;}},Forms:{BasicInfoForm:function(){var K;return i.$(i.$((K=function(L){return function(M){return{Name:L,Age:M};};},j.Return(K)),l.Input("Name","Please enter your name")),l.InputInt("Age","Please enter a valid age"));},ContactInfoForm:function(){var N,O,P,Q,T,U,Y;N=(O=l.Input("Phone","Empty phone number not allowed"),(P=(Q=function(R){return{$:0,$0:R};},function(S){return j.Map(Q,S);}),P(O)));T=i.$(i.$(i.$((U=function(V){return function(W){return function(X){return{$:1,$0:{Street:V,City:W,Country:X}};};};},j.Return(U)),l.Input("Street","Empty street not allowed")),l.Input("City","Empty city not allowed")),l.Input("Country","Empty country not allowed"));Y=j.Do();return Y.Delay(function(){var _0,_1,_2,_4;return Y.Bind((_0=(_1=e.ofArray([["Phone",N],["Address",T]]),(_2=function(_3){return m.Select(0,_3);},_2(_1))),(_4=function(_5){return n.WithTextLabel("Contact Method",_5);},_4(_0))),function(_6){return Y.ReturnFrom(_6);});});},Input:function(_7,_8){var _9,_,ba,bb,bd,bf;_9=(_=(ba=m.Input(""),(bb=function(bc){return i.Validator().IsNotEmpty(_8,bc);},bb(ba))),(bd=function(be){return n.WithValidationIcon(be);},bd(_)));bf=function(bg){return n.WithTextLabel(_7,bg);};return bf(_9);},InputInt:function(bg,bh){var bi,bj,bk,bl,bm,bn,bp,br,bs;bi=(bj=(bk=(bl=m.Input(""),(bm=i.Validator().IsInt(bh),bm(bl))),(bn=function(bo){return n.WithValidationIcon(bo);},bn(bk))),(bp=function(bq){return n.WithTextLabel(bg,bq);},bp(bj)));br=(bs=function(bt){return bt<<0;},function(bu){return j.Map(bs,bu);});return br(bi);},LoginForm:function(bv){var bw,bx,by,bz,bA,bC,bE,bG,bH,bI,bJ,bK,bM,bO,bQ,bR,bU,bV,b8;bw=(bx=(by=(bz=m.Input(""),(bA=function(bB){return i.Validator().IsNotEmpty("Enter Username",bB);},bA(bz))),(bC=function(bD){return n.WithValidationIcon(bD);},bC(by))),(bE=function(bF){return n.WithTextLabel("Username",bF);},bE(bx)));bG=(bH=(bI=(bJ=m.Password(""),(bK=function(bL){return i.Validator().IsNotEmpty("Enter Password",bL);},bK(bJ))),(bM=function(bN){return n.WithValidationIcon(bN);},bM(bI))),(bO=function(bP){return n.WithTextLabel("Password",bP);},bO(bH)));bQ=i.$(i.$((bR=function(bS){return function(bT){return{Name:bS,Password:bT};};},j.Return(bR)),bw),bG);bU=(bV=j.Do(),bV.Delay(function(){var bX,bY,bZ,b0,b1;return bV.Bind((bX=(bY=(bZ=o.get_Default(),$.New(o,{Label:{$:1,$0:"Login"},Style:bZ.Style,Class:bZ.Class})),(b0=(b1=o.get_Default(),$.New(o,{Label:{$:1,$0:"Reset"},Style:b1.Style,Class:b1.Class})),function(b2){return n.WithCustomSubmitAndResetButtons(bY,b0,b2);})),bX(bQ)),function(b3){var b4,b5;return bV.ReturnFrom((b4=p.Async("Website:0",[b3]),(b5=function(b6){var b7;if(b6){b7=q;b7.location=bv;bv;return j.Return(null);}else{return l.WarningPanel("Login failed");}},l.WithLoadingPane(b4,b5))));});}));b8=function(b9){return n.WithFormContainer(b9);};return b8(bU);},SignupSequence:function(){var b_,b$,ca,cb,cd,ce,cf,cg,ch,ci,ck,cm,cn,cp,cs,ct,cu,cv,cx,cy,cz,cA,cB,cC,cE,cG,cH,cJ,cM,c6,c7,c$;b_=(b$=(ca=l.BasicInfoForm(),(cb=function(cc){return n.WithSubmitAndResetButtons(cc);},cb(ca))),(cd=(ce=(cf=r.get_Default(),(cg=(ch=(ci=function(cj){return{$:0,$0:cj};},ci("Please enter your name and age below.")),(ck=function(cl){return{$:1,$0:cl};},ck(ch))),$.New(r,{Header:(cm=(cn=function(co){return{$:0,$0:co};},cn("Step 1 - Your name and age")),(cp=function(cq){return{$:1,$0:cq};},cp(cm))),Padding:cf.Padding,Description:cg,BackgroundColor:cf.BackgroundColor,BorderColor:cf.BorderColor,CssClass:cf.CssClass,Style:cf.Style}))),function(cr){return n.WithCustomFormContainer(ce,cr);}),cd(b$)));cs=(ct=(cu=l.ContactInfoForm(),(cv=function(cw){return n.WithSubmitAndResetButtons(cw);},cv(cu))),(cx=(cy=(cz=r.get_Default(),(cA=(cB=(cC=function(cD){return{$:0,$0:cD};},cC("Please enter your phone number or your address below.")),(cE=function(cF){return{$:1,$0:cF};},cE(cB))),$.New(r,{Header:(cG=(cH=function(cI){return{$:0,$0:cI};},cH("Step 2 - Your preferred contact information")),(cJ=function(cK){return{$:1,$0:cK};},cJ(cG))),Padding:cz.Padding,Description:cA,BackgroundColor:cz.BackgroundColor,BorderColor:cz.BorderColor,CssClass:cz.CssClass,Style:cz.Style}))),function(cL){return n.WithCustomFormContainer(cy,cL);}),cx(ct)));cM=function(cN){return function(cO){return function(){var cQ,cR,cS,cT,cU,cV,cW,cX,cZ,c0,c2,c3,c5;cQ=cO.$==0?(cR=cO.$0,"the phone number: "+cR):(cS=cO.$0,"the address: "+cS.Street+", "+cS.City+", "+cS.Country);cT=e.ofArray([(cU=e.ofArray([d.Text("Sign-up summary")]),(cV=d.Tags(),cV.NewTag("legend",cU))),d.P(e.ofArray([(cW="Hi "+cN.Name+"!",(cX=function(cY){return d.Text(cY);},cX(cW)))])),d.P(e.ofArray([(cZ="You are "+$$.String(cN.Age)+" years old",(c0=function(c1){return d.Text(c1);},c0(cZ)))])),d.P(e.ofArray([(c2="Your preferred contact method is via "+cQ,(c3=function(c4){return d.Text(c4);},c3(c2)))]))]);c5=d.Tags();return c5.NewTag("fieldset",cT);};};};c6=(c7=j.Do(),c7.Delay(function(){return c7.Bind(b_,function(c9){return c7.Bind(cs,function(c_){return c7.ReturnFrom(j.OfElement((cM(c9))(c_)));});});}));c$=function(da){return j.Flowlet(da);};return c$(c6);},WarningPanel:function(db){var dc;dc=j.Do();return dc.Delay(function(){var de;return dc.Bind((de=function(){return c.add(d.Div(e.ofArray([d.Attr().Class("warningPanel")])),e.ofArray([d.Text(db)]));},j.OfElement(de)),function(){return dc.ReturnFrom(j.Never());});});},WithLoadingPane:function(dh,di){var dj,dk;dj=(dk=function(){var dm,dn,_do,dp,du;dm=d.Div(e.ofArray([d.Attr().Class("loadingPane")]));dn=t.New();_do=(dp=function(){var dr;dr=function(ds){var dt;dt=$.New(w,{$:0,$0:ds});dn.event.Trigger(dt);return x.Return(null);};return x.Bind(dh,dr);},x.Delay(dp));du=function(dv){var dw;dw={$:0};return x.Start(dv);};du(_do);return[dm,function(dx){dx;},dn.event];},j.BuildFormlet(dk));return j.Replace(dj,di);}},HelloWorldControl:$.Class({get_Body:function(){return y.HelloWorld();}}),LoginControl:$.Class({get_Body:function(){return l.LoginForm(this.redirectUrl);}}),SignupSequenceControl:$.Class({get_Body:function(){return l.SignupSequence();}})}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Html);c=$.Safe(b.Operators);d=$.Safe(b.Default);e=$.Safe(a.List);f=$.Safe(e.T);g=$.Safe($$.jQuery);h=$.Safe(a.Formlet);i=$.Safe(h.Data);j=$.Safe(h.Formlet);k=$.Safe($$.Website);l=$.Safe(k.Forms);m=$.Safe(h.Controls);n=$.Safe(h.Enhance);o=$.Safe(n.FormButtonConfiguration);p=$.Safe(a.Remoting);q=$.Safe($$.window);r=$.Safe(n.FormContainerConfiguration);s=$.Safe(a.Control);t=$.Safe(s["FSharpEvent`1"]);u=$.Safe($$.IntelliFactory.Formlet);v=$.Safe(u.Base);w=$.Safe(v["Result`1"]);x=$.Safe(a.Concurrency);return y=$.Safe(k.Client);});$.OnLoad(function(){});}());
